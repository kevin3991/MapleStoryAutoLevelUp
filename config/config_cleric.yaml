# ====== Customized Configuration ======
# Place your personal settings here.
# These will overwrite values from config_default.yaml.
# Focus on tuning here â€” check config_default.yaml for parameter full descriptions.

# Note that you can create your own config_XXXXX.yaml and assign it to script by
# adding this arguments: --cfg XXXXX
# -----------------------------------------

# ğŸ¯ KEY BINDINGS
# Match these to your in-game keys. Uncomment once you're done.
key:
  aoe_skill: "s"            # ğŸ’¥ Set to the AoE skill key. Choose a key with low cooldown.
  directional_attack: "d"   # âš”ï¸ Assign to your main spammable attack.
  teleport: "a"             # ğŸŒ€ Leave empty ("") if your class canâ€™t teleport.
  jump: "z"             # ğŸ¦˜ Set to jump. No need to change unless you use a non-standard key.
  add_hp: "1"               # â¤ï¸ Assign to HP potion hotkey. Match with your potion shortcut.
  add_mp: "2"               # ğŸ’§ Assign to MP potion hotkey. Match with your potion shortcut.
  return_home: "home"       # ğŸ” Key to use return home scroll.
  party: "y"                # âŒ¨ï¸ Party window shortcut

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Auto change channel
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# "": Off
# "true": Change channel once other player is detected
# "pixel": Change channel once other player move set pixels in other_player_move_pixel
auto_change_channel: "pixel"
other_player_move_pixel: 10  # only work when auto_change_channel == "pixel" 

nametag:
  enable: False
  # ğŸ§ª Comparison mode for matching the nametag:
  #   - "grayscale": match using grayscale image
  #   - "white_mask": match using binarized image
  mode: "grayscale"  # Options: "grayscale", "white_mask"

  # ğŸ¯ Offset from the top-left corner of the matched nametag to the character center
  offset: [-50, 30]  # in pixels

  # ğŸ“ Matching threshold
  diff_thres: 0.25     # [0.0 ~ 1.0] â€” lower = more tolerant, higher = stricter

  # ğŸ§  Global detection fallback
  # If the diff is higher than this threshold, do a full-frame search.
  # If lower, search near the last known location to save time.
  # Set to 0.0 to disable this optimization
  global_diff_thres: 0.2

  # âœ‚ï¸ Split detection
  # To avoid occlusion from ladders or background objects,
  # the nametag will be split vertically and matched in smaller parts.
  split_width: 30  # in pixels â€” width of each vertical split


camera:
  y_start: 60     # â¬†ï¸ Top boundary (in pixels)
  y_end: 665      # â¬‡ï¸ Bottom boundary (in pixels)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸŒ€ Mage Teleport
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# This feature lets Mages use teleport to move faster while walking.
# âš ï¸ Still experimental! Enabling it may cause route-following issues.

teleport:
  is_use_teleport_to_walk: False  # âœ… Use teleport while walking (may cause inaccurate pathing)
  cooldown: 1                     # â±ï¸ Teleport skill cooldown (in seconds)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ§™â€â™‚ï¸ Edge Teleport
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# When your character approaches the edge of a platform,
# this feature triggers a teleport (for Mages) to prevent falling.
# If your character isn't a Mage, it will perform a jump instead.

edge_teleport:
  enable: True                 # âœ… Enable or disable this feature
  trigger_box_width: 20        # â†”ï¸ Width of the edge detection box (in pixels)
  trigger_box_height: 10       # â†•ï¸ Height of the edge detection box (in pixels)
  color_code: [255, 127, 127]  # ğŸ¨ RGB color code to represent platform edge


# ğŸ§™ BUFF SKILLS
# Add keys for buffs you want to auto-cast. Match cooldowns with actual in-game durations.
buff_skill:
  keys: ["f", "4", "5"]          # âŒ¨ï¸ Add one or more buff keys here (in order).
  cooldown: [122, 70, 200]       # â±ï¸ Set each skillâ€™s cooldown (seconds). Be precise to avoid spamming.

# âš”ï¸ DIRECTIONAL ATTACK SETTINGS
# Tune these by observing the debug window.
# Smaller range -> you will fight monster in close-range combat
# Larger range -> you will attack monster far away, but could hit nothing if it's set to large
directional_attack:
  cooldown: 0.4               # Magic claw
#   range_x: 320              # â†”ï¸ Try reducing if youâ€™re hitting unreachable monsters.
#   range_y: 60               # â†•ï¸

# ğŸ’¥ AOE SKILL SETTINGS
# Similar to directional attack. Adjust to match your AoE hitbox on screen.
aoe_skill:
  # Multiple heal
  # range_x: 350               # â†”ï¸ Try reducing if youâ€™re hitting unreachable monsters.
  # range_y: 170               # â†•ï¸
  # Holy light
  range_x: 350               # â†”ï¸ Try reducing if youâ€™re hitting unreachable monsters.
  range_y: 170               # â†•ï¸

# â¤ï¸ HEALTH MONITOR
# Use this to auto-drink potions at specific HP/MP thresholds.
# Cleric use skill to heal; therefore, need to set force_heal to False
health_monitor:
  enable: True              # âœ… Set to False if using pet auto-heal.
  force_heal: True          # ğŸ›¡ï¸ Heal first â€” stop attacking until HP is restored
  add_hp_ratio: 0.5         # â¤ï¸ drink potion when HP is below this number
  add_mp_ratio: 0.5         # ğŸ’™ drink potion when MP is below this number
  add_hp_cooldown: 0     # ğŸ•’ Seconds to wait between HP potions, prevent potion spam
  add_mp_cooldown: 0     # ğŸ•’ Seconds to wait between MP potions, prevent potion spam
  fps_limit: 20            # ğŸš¥ Loop rate for the health monitor thread
  return_home_if_no_potion: True      # âœ… Use homing scroll when potion is used up
  return_home_watch_dog_timeout: 3     # ğŸ•’ Duration to detect HP is lower than "add_hp_ratio"


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# âš ï¸ Rune Warning Detection
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Detects the "Please remove the rune" message on screen.
# When this warning appears, the bot will pause combat and start searching for the rune instead.
rune_warning:
  top_left: [513, 216]        # ğŸŸ¦ Top-left corner of the rune warning message
  bottom_right: [768, 256]    # ğŸŸ¥ Bottom-right corner of the rune warning
  diff_thres: 0.35             # ğŸ“ Matching threshold [0.0 ~ 1.0], higher = stricter match

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# âœ¨ Rune Detection Box
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# This detects the glowing purple rune symbol on screen.
# The box determines how big of a region to search in the game screen.
rune_detect:
  box_width: 350              # â†”ï¸ Width of the detection region
  box_height: 150             # â†•ï¸ Height of the detection region
  diff_thres: 0.2             # ğŸ“ Match threshold [0.0 ~ 1.0], higher = stricter match

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ§­ Rune-Finding Behavior
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Defines the bot's strategy for searching and interacting with the rune.
rune_find:
  timeout: 10               # â³ Maximum time (in seconds) to keep searching before giving up
                              # If the timeout is reached, the bot will fallback to route_rest.png and rest.
  timeout_action: "change_channel" # "go_home"
  near_rune_duration: 10       # ğŸ•’ Duration to interact with rune when a positive detection occurs
  rune_trigger_cooldown: 0.3    # ğŸ•’ Cooldown for 'up' key rune trigger
  rune_trigger_distance_x: 20    # only press 'up' when player distance(in pixel) to the rune is close enough.
  rune_trigger_distance_y: 200   # only press 'up' when player distance(in pixel) to the rune is close enough.


rune_solver:
  arrow_box_size: 80           # ğŸ“ Arrow icon size in pixels (e.g., 75x75 box)
  arrow_box_interval: 170      # â†”ï¸ Distance between arrows (horizontal spacing in pixels)
  arrow_box_coord: [355, 365]  # ğŸ¯ Top-left coordinate of the first (leftmost) arrow
  arrow_box_diff_thres: 0.32    # ğŸ“ Match threshold [0.0 ~ 1.0]
                               #     â†ª If the match score of the first arrow is lower than this,
                               #     the solver assumes the rune mini-game has start

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# âš™ï¸ System Settings
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Controls performance and behavior of core system threads.

system:
  fps_limit_main: 30                # ğŸš¥ Main loop FPS â€“ controls how fast the main thread runs
  fps_limit_keyboard_controller: 30 # ğŸš¥ Keyboard controller thread FPS
  fps_limit_window_capturor: 20     # ğŸš¥ Window capture thread FPS
  fps_limit_route_recorder: 10      # ğŸš¥ Route recorder FPS
  fps_limit_auto_dice_roller: 1     # ğŸš¥ Auto rice roller FPS
  key_debounce_interval: 1          # â±ï¸ Cooldown (in seconds) between function key presses (e.g., F1, F2...)
  show_debug_window: True           # ğŸ Show debug window (disable to save resources)
  server: "TW"                      # "TW", "NA"
  language: "chinese"               # "english" "chinese"
